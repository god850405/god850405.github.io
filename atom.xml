<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Marcus&#39;s成長日誌</title>
  
  <subtitle>Confidence id the master of fate.</subtitle>
  <link href="https://blog.marcuschen.cc/atom.xml" rel="self"/>
  
  <link href="https://blog.marcuschen.cc/"/>
  <updated>2021-01-04T11:09:26.676Z</updated>
  <id>https://blog.marcuschen.cc/</id>
  
  <author>
    <name>Marcus Chen</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Vuejs、.NET5.0佈署</title>
    <link href="https://blog.marcuschen.cc/2020/01/04/2021-1-4/"/>
    <id>https://blog.marcuschen.cc/2020/01/04/2021-1-4/</id>
    <published>2020-01-04T08:44:44.000Z</published>
    <updated>2021-01-04T11:09:26.676Z</updated>
    
    <content type="html"><![CDATA[<p>大略一個月前開始學習前後端分離，分別接觸<a href="https://vuejs.org/">Vuejs</a>和<a href="https://docs.microsoft.com/zh-tw/dotnet/core/dotnet-five">.NET5.0</a>，由於是第一次接觸<a href="https://vuejs.org/">Vuejs</a>加上<a href="https://vuejs.org/">Vuejs</a>的入門門檻比較高，在剛開始學的過程滿噩夢的，可在經過一段時間琢磨後，開始悟到<a href="https://vuejs.org/">Vuejs</a>的強大及便利。第一篇文章想說整理並記錄下學習佈署的過程中遇到的一些瓶頸。</p><p>↓ 先讓我們來看看很陽春的專案結果：<br><strong><a href="https://shop.marcuschen.cc/">ShopDemo</a></strong></p><h2 id="Vuejs-GitPage-佈署"><a href="#Vuejs-GitPage-佈署" class="headerlink" title="Vuejs GitPage 佈署"></a>Vuejs GitPage 佈署</h2><p><em>備註：還沒有 GitHub 帳號的話，必需要先去 <strong><a href="https://github.com/">Github</a></strong> 申請一個帳號並開啟一個新的<strong>repository</strong></em></p><p>由於小弟是第一次用<a href="https://git-scm.com/">Git</a>，因此在捉摸上也花了不少時間!後來才發現原來官網就有範例了!</p><h4 id="安裝-Git-之後，執行下列語法"><a href="#安裝-Git-之後，執行下列語法" class="headerlink" title="安裝 Git 之後，執行下列語法"></a>安裝 Git 之後，執行下列語法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 建構</span><br><span class="line">npm run build</span><br><span class="line"># cd 到建構输出的目录下</span><br><span class="line">cd dist</span><br><span class="line"># 部署到自訂義域的域名</span><br><span class="line"># echo &#39;自訂義域的域名&#39; &gt; CNAME</span><br><span class="line">git init</span><br><span class="line">git add -A</span><br><span class="line">git commit -m &#39;版本資訊&#39;</span><br><span class="line"># 部署到 https:&#x2F;&#x2F;&lt;USERNAME&gt;.github.io</span><br><span class="line"># git push -f git@github.com:&lt;USERNAME&gt;&#x2F;&lt;USERNAME&gt;.github.io.git master</span><br><span class="line"></span><br><span class="line"># 部署到 https:&#x2F;&#x2F;&lt;USERNAME&gt;.github.io&#x2F;&lt;REPO&gt;</span><br><span class="line"># git push -f git@github.com:&lt;USERNAME&gt;&#x2F;&lt;REPO&gt;.git master:gh-pages</span><br></pre></td></tr></table></figure><h2 id="NET5-0-IIS-佈署"><a href="#NET5-0-IIS-佈署" class="headerlink" title=".NET5.0 IIS 佈署"></a>.NET5.0 IIS 佈署</h2><p><em>備註：還沒有安裝 IIS 的話，必需要先去 <strong><a href="https://melayogu.pixnet.net/blog/post/132694142-%5Biis%5D-win10-%E5%AE%89%E8%A3%9Diis">安裝 IIS</a></strong></em></p><p>後端我是使用.NET5.0 來建立，礙於版本太新了，網路上沒有什麼範例資料可以參考，於是搞了很久，終於找到成功架設的方法。</p><blockquote><p>專案 (右鍵) → 發佈 → 目標「資料夾」→ 輸出路徑 A 專案上右鍵 → 發佈 → 目標「資料夾」→ 輸出路徑 A → 發佈</p></blockquote><ul><li>目標 Framework ：<strong>net5.0</strong></li><li>佈署模式 ：<strong>Framework 依存性</strong></li><li>目標執行階段 ：<strong>可攜式</strong></li></ul><h4 id="IIS-設定"><a href="#IIS-設定" class="headerlink" title="IIS 設定"></a>IIS 設定</h4><blockquote><p>應用程式集區 → 新增應用程式集區</p></blockquote><ul><li>名稱 ：<strong>名稱 B</strong></li><li>.NETCLR 版本 ：<strong>沒有受控碼</strong></li><li>受控管線模式 ：<strong>整合式</strong></li><li>立即啟用應用程式集區 ：<strong>√</strong><blockquote><p>站台 (右鍵) → 新增網站 → 確定</p></blockquote></li><li>站台名稱 ：<strong>網站名稱 C</strong></li><li>應用程式集區 ：<strong>*名稱 B ( 剛剛新增的應用程式集區 )</strong></li><li>實體路徑 ：<strong>輸出路徑 A ( 上面發佈指定的路徑 )</strong></li><li>繫結 ：<strong>輸入你電腦閒置的連接埠 ( 其他內容先不做設定，等 SSL 憑證申請完再來修改 )</strong></li></ul><blockquote><p>再來點選<strong>網站名稱 C</strong>裡的<strong>模組</strong></p></blockquote><ul><li>檢查是否有安裝*<em><a href="https://dotnet.microsoft.com/permalink/dotnetcore-current-windows-runtime-bundle-installer">AspNetCoreModuleV2</a>**</em></li></ul><p>接下來就可以嘗試瀏覽你建立的網站了，如果程式碼確定無誤還是無法正常連線，可以嘗試檢查<strong>輸出路徑 A</strong>下的 <strong>web.config</strong>有沒有設定好</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">location</span> <span class="attr">path</span>=<span class="string">&quot;.&quot;</span> <span class="attr">inheritInChildApplications</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">system.webServer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">handlers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">add</span> <span class="attr">name</span>=<span class="string">&quot;專案名稱&quot;</span> <span class="attr">path</span>=<span class="string">&quot;*&quot;</span> <span class="attr">verb</span>=<span class="string">&quot;*&quot;</span> <span class="attr">modules</span>=<span class="string">&quot;AspNetCoreModuleV2&quot;</span> <span class="attr">resourceType</span>=<span class="string">&quot;Unspecified&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">handlers</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">aspNetCore</span> <span class="attr">processPath</span>=<span class="string">&quot;dotnet&quot;</span> <span class="attr">arguments</span>=<span class="string">&quot;.\專案名稱.dll&quot;</span> <span class="attr">stdoutLogEnabled</span>=<span class="string">&quot;false&quot;</span> <span class="attr">stdoutLogFile</span>=<span class="string">&quot;.\logs\stdout&quot;</span> <span class="attr">hostingModel</span>=<span class="string">&quot;inprocess&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">system.webServer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="想讓別人可以連到你的網站"><a href="#想讓別人可以連到你的網站" class="headerlink" title="想讓別人可以連到你的網站"></a>想讓別人可以連到你的網站</h2><ul><li><strong>擁有乙個固定 IP</strong> <a href="https://free.com.tw/hinet-static-ip/">中華電信 HiNet 固定 IP 申請教學</a></li><li><strong>設定好固定 IP</strong> <a href="https://andy6804tw.github.io/2019/09/09/win-static-ip/">設定教學</a></li><li><strong>防火牆增加輸入規則你網站使用的埠號</strong> <a href="https://wiki.mcneel.com/zh-tw/zoo/window7firewall">從 Windows 防火牆開啟 TCP Port 80</a></li><li>如果網路連線非 PPPoE 撥接，可能還需要設定 <strong><a href="https://wiki.mcneel.com/zh-tw/zoo/window7firewall">[通訊埠轉發Port Forwarding]</a></strong></li></ul><h2 id="網站加上-SSL-憑證-https"><a href="#網站加上-SSL-憑證-https" class="headerlink" title="網站加上 SSL 憑證(https)"></a>網站加上 SSL 憑證(https)</h2><h6 id="免費-SSL-申請-需要擁有自己的網域"><a href="#免費-SSL-申請-需要擁有自己的網域" class="headerlink" title="免費 SSL 申請 (需要擁有自己的網域)"></a><a href="https://www.sslforfree.com/">免費 SSL 申請</a> (需要擁有自己的網域)</h6><p>申請的方式其實很簡單我就大概解釋流程，</p><ul><li>輸入你的網域後按申請</li><li>辦會員後</li><li>免費的方案就什麼功能都不要選</li><li>選 90 天驗證一次就免費了</li><li>驗證網域是你的後</li><li>就可以下載一個壓縮檔下來</li></ul><p>裡面會有三個檔案，這裡我們只需要 <strong>名稱 A.crt</strong> 和 <strong>名稱 B.key</strong>檔案 !<br>因為 IIS 只支援 pfx 檔<br>所以我們還需要下載<a href="http://gnuwin32.sourceforge.net/packages/openssl.htm">OpenSSL for Windows - GnuWin32</a>來幫忙轉檔</p><ul><li>安裝<a href="http://gnuwin32.sourceforge.net/packages/openssl.htm">OpenSSL for Windows - GnuWin32</a></li><li>接著將剛剛壓縮檔裡的 .crt 與 .key 檔複製到 OpenSSL 內 bin 資料夾<br>預設路徑是 C:\Program Files (x86)\GnuWin32\bin</li><li>以<strong>以系統管理員身分</strong>開啟<strong>命令提示字元</strong></li><li>切換路徑至 C:\Program Files (x86)\GnuWin32\bin</li><li>cd C:\Program Files (x86)\GnuWin32\bin</li><li>輸入指令</li><li>openssl pkcs12 -export -out <strong>自訂義 pfx 輸出的名稱.pfx</strong> -inkey <strong>名稱 B.key</strong> -in <strong>名稱 A.crt</strong></li><li>輸入兩次設定的密碼</li><li>成功後就可以在目錄 C:\Program Files (x86)\GnuWin32\bin 下看到<strong>自訂義 pfx 輸出的名稱.pfx</strong>這個檔案</li></ul><h2 id="IIS-SSL-憑證安裝"><a href="#IIS-SSL-憑證安裝" class="headerlink" title="IIS SSL 憑證安裝"></a>IIS SSL 憑證安裝</h2><blockquote><p>點選連線裡的跟目錄 (你的使用者名稱) → 點選伺服器憑證 → 匯入 → 確定</p></blockquote><ul><li>憑證檔案 ：<strong><em>選取剛輸出的 pfx 檔案</em></strong></li><li>密碼 ： <strong>上面設定 pfx 的密碼</strong></li><li>選取憑證儲存區 ：<strong>個人</strong></li><li>允許匯出此憑證 ：<strong>√</strong><blockquote><p>點選新增的網站 → 繫結 → 新增 → 確定 → 關閉 → 重啟</p></blockquote></li><li>類型 ：<strong>https</strong></li><li>IP 位址 ：<strong>你的 local ip</strong></li><li>連接埠 ：<strong>443</strong></li><li>主機名稱 ：<strong>上面申請網域的主機</strong></li><li>SSL 憑證 ：<strong>選取剛剛匯入的憑證</strong></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;大略一個月前開始學習前後端分離，分別接觸&lt;a href=&quot;https://vuejs.org/&quot;&gt;Vuejs&lt;/a&gt;和&lt;a href=&quot;https://docs.microsoft.com/zh-tw/dotnet/core/dotnet-five&quot;&gt;.NET5.0&lt;/a&gt;</summary>
      
    
    
    
    <category term="佈署設定" scheme="https://blog.marcuschen.cc/categories/%E4%BD%88%E7%BD%B2%E8%A8%AD%E5%AE%9A/"/>
    
    
    <category term="Vuejs" scheme="https://blog.marcuschen.cc/tags/Vuejs/"/>
    
    <category term=".NET5.0" scheme="https://blog.marcuschen.cc/tags/NET5-0/"/>
    
    <category term="IIS" scheme="https://blog.marcuschen.cc/tags/IIS/"/>
    
    <category term="SSL" scheme="https://blog.marcuschen.cc/tags/SSL/"/>
    
    <category term="GitPage" scheme="https://blog.marcuschen.cc/tags/GitPage/"/>
    
  </entry>
  
</feed>
